<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dice Game</title>
    <script>
        var ctx;

        // only write when do the one-dice draw
        var diceX= 50;
        var diceY= 50;
        var diceWidth = 100;
        var diceHeight = 100;
        var dotRad = 6;

        // for whole application
        var ctx;
        var dx;
        var dy;
        var firstturn= true; // Slide 5
        var point; // Slide 5



        function throwdice(){

            var sum=0; //Slide 5

            
           // draw two dices
           diceX = 50;

           ctx=document.getElementById('dicePanel').getContext('2d');
            var i;
            for (i=0;i<2; i++){
                var ch= 1+ Math.floor(Math.random()*6);

                // Silde 6
                sum=sum +ch;

                ctx.lineWidth =5; 
                ctx.clearRect(diceX,diceY,diceWidth,diceHeight);
                ctx.strokeRect(diceX,diceY,diceWidth,diceHeight);
                ctx.fillStyle = "#009966";
                switch(ch) {
                    case 1:
                    draw1();
                    break;
                    case 2:
                    draw2();
                    break;
                    case 3:
                    draw2();
                    draw1();
                    break;
                    case 4:
                    draw4();
                    break;
                    case 5:
                    draw4();
                    draw1();
                    break;
                    case 6:
                    draw4();
                    draw2Mid();
                    break;
                }
                diceX=diceX+150;

            }

            // Slide 6
            if (firstturn) {
                switch (sum) {
                    case 7:
                    case 11:
                    document.f.outcome.value="You Win!"; 
                    //Slide 7
                    var bank = Number(document.f.bank.value);
                    bank=bank+20;
                    document.f.bank.value=String(bank);   
                        break;
                    case 2:
                    case 3:
                    case 12:
                    document.f.outcome.value="You Lose!";
                    //Slide 7
                    var bank = Number(document.f.bank.value);
                    if (bank <10) {
                        alert("You ran out of money! Add some more and try again.");
                        return;
                    }
                    bank=bank-10;
                    document.f.bank.value=String(bank);    
                        break;
                
                    default:
                    point=sum;
                    document.f.pv.value=point;
                    firstturn=false;
                    document.f.stage.value="Need follow-up throw.";
                    document.f.outcome.value=" ";
                    break;
                }
            } else {
                switch (sum) {
                    case point:
                    document.f.outcome.value="You Win!"; 
                    document.f.stage.value="Back to first throw."; 
                    document.f.pv.value=" ";
                    firstturn = true;
                    //Slide 7
                    var bank = Number(document.f.bank.value);
                    bank=bank+20;
                    document.f.bank.value=String(bank);  
                        break;
                    case 7:
                    document.f.outcome.value="You Lose!";
                    document.f.stage.value="Back to first throw.";
                    document.f.pv.value=" ";
                    firstturn = true;
                    //Slide 7
                    var bank = Number(document.f.bank.value);
                    if (bank <10) {
                        alert("You ran out of money! Add some more and try again.");
                        return;
                    }
                    bank=bank-10;
                    document.f.bank.value=String(bank);

                        break;
                }
            }
        }
        function draw1(){
            var dotX;
            var dotY;
            ctx.beginPath();
            dotX = diceX + 0.5*diceWidth;
            dotY = diceY + 0.5*diceHeight;
            ctx.arc(dotX,dotY,dotRad,0,Math.PI*2,true);
            ctx.closePath();
            ctx.fill();
        }
        function draw2(){
            var dotX;
            var dotY;
            ctx.beginPath();
            dotX = diceX + 3*dotRad;
            dotY = diceY + 3*dotRad;
            ctx.arc(dotX,dotY,dotRad,0,Math.PI*2,true);
            dotX = diceX + diceWidth-3*dotRad;
            dotY = diceY + diceHeight-3*dotRad;
            ctx.arc(dotX,dotY,dotRad,0,Math.PI*2,true);
            ctx.closePath();
            ctx.fill();

        }
        
        function draw4(){
            var dotX;
            var dotY;
            ctx.beginPath();
            dotX = diceX + 3*dotRad;
            dotY = diceY + 3*dotRad;
            ctx.arc(dotX,dotY,dotRad,0,Math.PI*2,true);
            dotX = diceX + diceWidth-3*dotRad;
            dotY = diceY + diceHeight-3*dotRad;
            ctx.arc(dotX,dotY,dotRad,0,Math.PI*2,true);
            ctx.closePath();
            ctx.fill();

            ctx.beginPath();
            dotX = diceX + 3*dotRad;
            dotY = diceY + diceHeight-3*dotRad;
            ctx.arc(dotX,dotY,dotRad,0,Math.PI*2,true);
            dotX = diceX + diceWidth-3*dotRad;
            dotY = diceY + 3*dotRad;
            ctx.arc(dotX,dotY,dotRad,0,Math.PI*2,true);
            ctx.closePath();
            ctx.fill();

        }
        function draw2Mid(){
            var dotX;
            var dotY;
            ctx.beginPath();
            dotX = diceX + 3*dotRad;
            dotY = diceY + 0.5*diceHeight;
            ctx.arc(dotX,dotY,dotRad,0,Math.PI*2,true);
            dotX = diceX + diceWidth-3*dotRad;
            dotY = diceY + 0.5*diceHeight;
            ctx.arc(dotX,dotY,dotRad,0,Math.PI*2,true);
            ctx.closePath();
            ctx.fill();

        }

    </script>
</head>
<body>
    <canvas id="dicePanel" width="400" height="300">
        Your browser doesn't support the HTML5 element canvase.
    </canvas>
    <br/>
    <button onClick="throwdice();">Throw dice </button>
    <form name="f" id="f">
        Stage: <input type="text" name="stage" value="First Throw"/>
        Point: <input type="text" name="pv" value=" "/>
        Outcome: <input type="text" name="outcome" value=" "/>
        
        <!-- slide 7 -->
        Bank roll: <input name="bank" value="100"/>  
         
    </form>
</body>
</html>