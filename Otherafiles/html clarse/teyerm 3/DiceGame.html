<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dice Game</title>
    <script>
        var ctx; // canvas content
        var diceX;
        var diceY= 50;
        var diceWidth = 100;
        var diceHeight = 100;
        var dotRad = 6;

        // Var for game rules
        var point;
        var firstThrow=true;


        function throwdice(){
            var sum=0;
            diceX= 50;
            ctx=document.getElementById('DiceFaces').getContext('2d')
            var i;
            for(i=0; i<2; i++){
                var ch=1+ Math.floor(Math.random()*6);
                sum=sum+ch;
                ctx.lineWidth =5; 
                ctx.clearRect(diceX,diceY,diceWidth,diceHeight);
                ctx.strokeRect(diceX,diceY,diceWidth,diceHeight);
                ctx.fillStyle = "#009966";
                switch(ch){
                    case 1:
                    draw1()
                    break;
                    case 2:
                    draw2()
                    break;
                    case 3:
                    draw2()
                    draw1()
                    break;
                    case 4:
                    draw4()
                    break;
                    case 5:
                    draw4()
                    draw1()
                    break;
                    case 6:
                    draw4()
                    draw2Mid();
                    break;
                }
                diceX=diceX+150;
            }
            if (firstThrow) {
                switch (sum) {
                    case 7:
                    case 11:
                        document.result.Outcome.value="You Win!" 
                        var bank=Number(document.result.bank.value);
                        console.log("++" + bank)
                        bank=bank+20;
                        document.result.bank.value=String(bank);
                        break;
                    case 2:
                    case 3:
                    case 12:
                        document.result.Outcome.value="You Lose!"
                        var bank=Number(document.result.bank.value);
                        console.log("--" + bank)
                        if (bank<10){
                            alert("money.exe has failed to load")
                        }
                        bank=bank-10;
                        document.result.bank.value=String(bank);
                    default:
                        point=sum;
                        document.result.Point.value=point;
                        firstThrow=false;
                        document.result.Stage.value="Need follow-up throw.";
                        var bank=Number(document.result.bank.value);
                        console.log("==" + bank)
                        document.result.bank.value=String(bank);
                        document.result.Outcome.value=" ";
                        break;
                }
            } else {
                switch (sum) {
                    case point:
                        document.result.Outcome.value="You Win!"
                        document.result.Stage.value="Back to First Throw";
                        document.result.Point.value="";
                        firstThrow=true;
                        break;
                    case 7:
                        document.result.Outcome.value="You Lose!"
                        document.result.Stage.value="Back to First Throw";
                        document.result.Point.value="";
                        firstThrow=true;
                        break;
                    default:
                        point=sum;
                        document.result.Point.value=point;
                        firstThrow=false;
                        document.result.Stage.value="Need follow-up throw.";
                        document.result.Outcome.value=" ";
                        break;
                }
            }

        }
        function draw1(){
            var dotX;
            var dotY;
            ctx.beginPath();
            dotX = diceX + 0.5*diceWidth;
            dotY = diceY + 0.5*diceHeight;
            ctx.arc(dotX,dotY,dotRad,0,Math.PI*2,true);
            ctx.closePath();
            ctx.fill();
        }
        function draw2(){
            var dotX;
            var dotY;
            ctx.beginPath();
            dotX = diceX + 3*dotRad;
            dotY = diceY + 3*dotRad;
            ctx.arc(dotX,dotY,dotRad,0,Math.PI*2,true);
            dotX = diceX + diceWidth-3*dotRad;
            dotY = diceY + diceHeight-3*dotRad;
            ctx.arc(dotX,dotY,dotRad,0,Math.PI*2,true);
            ctx.closePath();
            ctx.fill();

        }
        function draw4(){
            var dotX;
            var dotY;
            ctx.beginPath();
            dotX = diceX + 3*dotRad;
            dotY = diceY + 3*dotRad;
            ctx.arc(dotX,dotY,dotRad,0,Math.PI*2,true);
            dotX = diceX + diceWidth-3*dotRad;
            dotY = diceY + diceHeight-3*dotRad;
            ctx.arc(dotX,dotY,dotRad,0,Math.PI*2,true);
            ctx.closePath();
            ctx.fill();

            ctx.beginPath();
            dotX = diceX + 3*dotRad;
            dotY = diceY + diceHeight-3*dotRad;
            ctx.arc(dotX,dotY,dotRad,0,Math.PI*2,true);
            dotX = diceX + diceWidth-3*dotRad;
            dotY = diceY + 3*dotRad;
            ctx.arc(dotX,dotY,dotRad,0,Math.PI*2,true);
            ctx.closePath();
            ctx.fill();

        }
        function draw2Mid(){
            var dotX;
            var dotY;
            ctx.beginPath();
            dotX = diceX + 3*dotRad;
            dotY = diceY + 0.5*diceHeight;
            ctx.arc(dotX,dotY,dotRad,0,Math.PI*2,true);
            dotX = diceX + diceWidth-3*dotRad;
            dotY = diceY + 0.5*diceHeight;
            ctx.arc(dotX,dotY,dotRad,0,Math.PI*2,true);
            ctx.closePath();
            ctx.fill();

        }
    
    </script>
</head>
<body>
    <canvas id="DiceFaces" width="400" height="300">
        Your browser doesn't support the HTML5 element canvas.
    </canvas>
    <br/>
    <!-- <input id="Myinput" type="checkbox"> -->
    <button onclick="throwdice();"> Throw Dice </button>
    <form name="result" id="result">
        Stage: <input type="text" name="Stage" value="First Throw">
        Point: <input type="text" name="Point" value="">
        Outcome: <input type="text" name="Outcome" value="">
        Bank Roll <input name="bank" value="100">
    </form>
</body>
</html>